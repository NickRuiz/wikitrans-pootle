{% load i18n render_pager baseurl store_tags cache %}
{% get_current_language as LANGUAGE_CODE %}
{% get_current_language_bidi as LANGUAGE_BIDI %}
<!-- JS templates: move from here when possible -->
<script id="unit_view" type="text/x-jquery-template">
<td>
  <a title="Editatu itzulpena" id="editlink${id}" href="?unit=2921">
    <div class="translation-action">${id}</div>
  </a>
</td>
<td dir="" class="translate-original" rowspan="1" colspan="1">
  <div class="translate-original translate-view" id="orig${id}">
    <div lang="en" dir="ltr" class="translation-text">${source}</div>
  </div>
</td>
<td dir="ltr" class="translate-translation" rowspan="1" colspan="1">
  <div dir="ltr" class="translate-translation translate-view " id="trans${id}">
    <div lang="eu" class="translation-text" dir="ltr">${target}</div>
  </div>
</td>
</script>
<div class="translation-nav">
  {{ pager|render_pager }}
</div>
<div class="translate-form">
    <div id="store" class="hide">{{ store }}</div>
    <div id="path" class="hide">{{ store|l }}</div>
    <div id="pootle_path" class="hide">{{ store.pootle_path }}</div>
    <div id="active_uid" class="hide">{{ form.instance.id }}</div>
    <table cellpadding="0" cellspacing="0" class="translate-table" dir="{% if LANGUAGE_BIDI %}rtl{% else %}ltr{% endif %}">
      <tr lang="{{ LANGUAGE_CODE }}">
        <th colspan="1" rowspan="1" class="translate-table-title translate-edit"></th>
        <th colspan="1" rowspan="1" class="translate-table-title translate-original"></th>
        <th colspan="1" rowspan="1" class="translate-table-title translate-translation"></th>
      </tr>
      {% for unit in units %}
      <tr id="row{{ unit.id }}" class="{% cycle 'even' 'odd' %}{% ifequal unit form.instance %} translate-translation-row{% endifequal %}{% if unit.isfuzzy %} translate-translation-fuzzy{% endif %}"{% ifequal unit form.instance %} colspan="2"{% endifequal %}>
        <td{% ifequal unit form.instance %} class="translate-focus"{% endifequal %}>
          <a href="?unit={{ unit.id }}" id="editlink{{ unit.id }}" title="{% trans 'Edit translation' %}">
          <div class="translation-action">{{ unit.index }}</div>
          </a>
        </td>
        {% ifequal unit form.instance %}
          {% cache settings.CACHE_TIMEOUT unit_edit unit.id unit.mtime cantranslate cansuggest canreview alt_src_codes profile.id LANGUAGE_CODE %}
          {% render_unit_edit form %}
          {% endcache %}
        {% else %}
          {% cache settings.CACHE_TIMEOUT unit_view unit.id unit.mtime LANGUAGE_CODE %}
          {% render_unit_view unit %}
          {% endcache %}
        {% endifequal %}
      </tr>
      {% endfor %}
    </table>
</div>
<div class="translation-nav">
{{ pager|render_pager }}
</div>
